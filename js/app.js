var twitmin=function(){function t(){var t=n.totalLen,e=0;n.fulltext="",n.tokens.forEach(function(t){if("word"==t.type){var o=_.isUndefined(t.altN)?0:t.altN;e+=t.options[o].length,n.fulltext+=t.options[o]}else e+=t.str.length,n.fulltext+=t.str}),$("#disp-len").text(e),$("#disp-abs").text(t-e),$("#disp-perc").text(Math.round((t-e)/t*1e3)/10)}function e(t){var e="_hiddenCopyText_";if(n=document.getElementById(e),!n){var n=document.createElement("textarea");n.style.position="absolute",n.style.left="-9999px",n.style.top="0",n.id=e,document.body.appendChild(n)}n.textContent=t;var o=document.activeElement;n.focus(),n.setSelectionRange(0,n.value.length);var i;try{i=document.execCommand("copy")}catch(a){i=!1}return o&&"function"==typeof o.focus&&o.focus(),n.textContent="",i}var n={};return n.init=function(){$(function(){function e(t){var e=$(t),n=t.selectionStart,o=e.val();e.val(o.substring(0,n)+"\n"+o.substring(n)),t.selectionStart=n+1,t.selectionEnd=n+1}function o(){$("#tweet-form").submit()}function i(t){$(".WordAlts").addClass("hidden"),$(t).find(".WordAlts").removeClass("hidden")}$("#tweet").on("keyup",function(t){10!=t.keyCode&&13!=t.keyCode||!t.ctrlKey&&!t.metaKey||e(this)}).on("keydown",function(t){return 10!=t.keyCode&&13!=t.keyCode||t.ctrlKey||t.metaKey?void 0:(o(),t.preventDefault(),t.stopImmediatePropagation(),!1)}),$(".WordAlts").on("mouseenter",function(){clearTimeout($(this).closest(".Word").data("altTmeo"))}).on("mouseleave",function(){var t=this;setTimeout(function(){$(t).addClass("hidden")},500)}),$(".Word").on("mouseenter",function(){var t=this;clearTimeout($(this).data("altTmeo"));var e=setTimeout(function(){i(t)},250);$(this).data("altTmeo",e)}).on("mouseleave",function(){clearTimeout($(this).data("altTmeo"))}),$(".WordAlt").on("click",function(){var e=$(this).closest(".Word"),o=$(this).data("alt_n"),i=e.data("tok_n");e.find(".WVal").text(n.tokens[i].options[o]),n.tokens[i].altN=o,$(".WordAlts").addClass("hidden"),t()})}),$("#copy-btn").on("click",function(){e(n.fulltext)}),twitmin.tokens&&t()},n}();