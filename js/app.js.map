{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var twitmin = (function() {\n\tvar tm = {};\n\n\tfunction updateCharCount() {\n\t\tvar total = tm.totalLen;\n\t\tvar len = 0;\n\n\t\ttm.fulltext = '';\n\n\t\ttm.tokens.forEach(function(t) {\n\t\t\tif (t.type == 'word') {\n\t\t\t\tvar n = _.isUndefined(t.altN)?0:t.altN;\n\t\t\t\tlen += t.options[n].length;\n\t\t\t\ttm.fulltext += t.options[n];\n\t\t\t} else {\n\t\t\t\tlen += t.str.length;\n\t\t\t\ttm.fulltext += t.str;\n\t\t\t}\n\t\t});\n\n\t\t$('#disp-len').text(len);\n\t\t$('#disp-abs').text(total-len);\n\t\t$('#disp-perc').text(Math.round(((total-len)/total)*1000)/10);\n\t}\n\n\tfunction copyToClipboard(string) {\n\t\t// create hidden text element, if it doesn't already exist\n\t\tvar targetId = \"_hiddenCopyText_\";\n\t\tvar origSelectionStart, origSelectionEnd;\n\n\t\t// must use a temporary form element for the selection and copy\n\t\ttarget = document.getElementById(targetId);\n\t\tif (!target) {\n\t\t\tvar target = document.createElement(\"textarea\");\n\t\t\ttarget.style.position = \"absolute\";\n\t\t\ttarget.style.left = \"-9999px\";\n\t\t\ttarget.style.top = \"0\";\n\t\t\ttarget.id = targetId;\n\t\t\tdocument.body.appendChild(target);\n\t\t}\n\t\ttarget.textContent = string;\n\n\t\t// select the content\n\t\tvar currentFocus = document.activeElement;\n\t\ttarget.focus();\n\t\ttarget.setSelectionRange(0, target.value.length);\n\n\t\t// copy the selection\n\t\tvar succeed;\n\t\ttry {\n\t\t\tsucceed = document.execCommand(\"copy\");\n\t\t} catch(e) {\n\t\t\tsucceed = false;\n\t\t}\n\t\t// restore original focus\n\t\tif (currentFocus && typeof currentFocus.focus === \"function\") {\n\t\t\tcurrentFocus.focus();\n\t\t}\n\n\t\t// clear temporary content\n\t\ttarget.textContent = \"\";\n\n\t\treturn succeed;\n\t}\n\n\ttm.init = function() {\n\t\t$(function () {\n\t\t\tfunction insertNewline(elem) {\n\t\t\t\tvar $elem = $(elem);\n\n\t\t\t\t// insert newline at cursor\n\t\t\t\tvar caretPos = elem.selectionStart;\n\t\t\t\tvar str = $elem.val();\n\t\t\t\t$elem.val(str.substring(0, caretPos) + '\\n' + str.substring(caretPos));\n\n\t\t\t\t// restore cursor\n\t\t\t\telem.selectionStart = caretPos + 1;\n\t\t\t\telem.selectionEnd = caretPos + 1;\n\t\t\t}\n\n\t\t\tfunction submitForm() {\n\t\t\t\t// submit the form\n\t\t\t\t$('#tweet-form').submit();\n\t\t\t}\n\n\t\t\t// enter / ctrl-enter handling\n\t\t\t$('#tweet').on('keyup', function (e) {\n\t\t\t\tif((e.keyCode == 10 || e.keyCode == 13) && (e.ctrlKey || e.metaKey)) {\n\t\t\t\t\tinsertNewline(this);\n\t\t\t\t}\n\t\t\t}).on('keydown', function (e) {\n\t\t\t\tif((e.keyCode == 10 || e.keyCode == 13) && !(e.ctrlKey || e.metaKey)) {\n\t\t\t\t\tsubmitForm();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// alt magic\n\t\t\tfunction showAltsFor(word) {\n\t\t\t\t$('.WordAlts').addClass('hidden');\n\t\t\t\t$(word).find('.WordAlts').removeClass('hidden');\n\t\t\t}\n\n\t\t\t$('.WordAlts').on('mouseenter', function() {\n\t\t\t\tclearTimeout($(this).closest('.Word').data('altTmeo'));\n\t\t\t}).on('mouseleave', function() {\n\t\t\t\tvar self = this;\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t$(self).addClass('hidden');\n\t\t\t\t}, 500);\n\t\t\t});\n\n\t\t\t$('.Word').on('mouseenter', function() {\n\t\t\t\tvar self = this;\n\t\t\t\tclearTimeout($(this).data('altTmeo'));\n\t\t\t\tvar id = setTimeout(function(){\n\t\t\t\t\tshowAltsFor(self);\n\t\t\t\t}, 250);\n\t\t\t\t$(this).data('altTmeo', id);\n\t\t\t}).on('mouseleave', function() {\n\t\t\t\tclearTimeout($(this).data('altTmeo'));\n\t\t\t});\n\n\t\t\t$('.WordAlt').on('click', function() {\n\t\t\t\tvar $w = $(this).closest('.Word');\n\t\t\t\tvar altN = $(this).data('alt_n');\n\t\t\t\tvar tokN = $w.data('tok_n');\n\n\t\t\t\t$w.find('.WVal').text(tm.tokens[tokN].options[altN]);\n\n\t\t\t\t// preserve the value\n\t\t\t\ttm.tokens[tokN].altN = altN;\n\n\t\t\t\t$('.WordAlts').addClass('hidden');\n\n\t\t\t\tupdateCharCount();\n\t\t\t});\n\t\t});\n\n\t\t$('#copy-btn').on('click', function() {\n\t\t\tcopyToClipboard(tm.fulltext);\n\t\t});\n\n\t\t// update counter\n\t\tupdateCharCount();\n\t};\n\n\treturn tm;\n})();\n\n"],"sourceRoot":"/source/"}